<html>
  <head>
    <title>Myst</title>
    <link rel="stylesheet" href="../static/ctemp.css" />
    <link rel="icon" type="image/x-icon" href="../static/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <div id="header">
      <h1 id="hnm">Myst</h1>
    </div>

    <div id="chat-room">
      <div id="messages" hidden="none">
        <!-- messages will be added here dynamically using JavaScript -->
      </div>
      <form id="message-form">
        {% csrf_token %}
        <div hidden="none" id="new-msgs-below"><p></p></div>
        <input id="message-input" type="text" autocomplete="off"  placeholder="Type your message here..." />
        <button id="send" type="submit">Send</button>
      </form>
    </div>

    <div id="link">
      <p id="inm">The Invitee Has Not Joined Yet.</p>
      <div id="qr-btn"><p id="ntq"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code-scan" viewBox="0 0 16 16">
                                    <path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z"/>
                                    <path d="M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z"/>
                                    <path d="M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z"/>
                                    <path d="M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z"/>
                                    <path d="M12 9h2V8h-2v1Z"/>
                                  </svg></p></div>
      <div id="invite"><p id="nti">Copy Invite Link</p></div>
    </div>

    <div id="cd" hidden="none">
      <p id="cdt"></p>
      <div id="end"><p id="endb">End Chat</p></div>
    </div>

    <div id="init-popup" class="popup" style="display: block;">
      <div class="popup-content">
        <h3>New Chat Created!</h3>
        <div id="init-form">
          <button id="start-chat">Copy Invite Link</button>
          <button id="show-qr">QR Code Invite</button>
        </div>
      </div>
    </div>

    <div id="qr-popup" class="popup" style="display: none;">
      <div class="popup-content">
        <p>QR Code Invite</p>
        <div id="qrcode"></div>
        <form id="qr-form">
          <button id="close">Close</button>
        </form>
      </div>
    </div>

    <div id="loading-popup" class="hidden">
      <div class="loading-container">
        <div class="loading-wheel"></div>
        <p id="loading-message">Starting Secure Chat ...</p>
      </div>
    </div>

    <div id="connection-popup" class="hidden">
      <div class="loading-container">
        <p>Connection Lost!</p>
        <button id="reconnect">Reconnect</button>
      </div>
    </div>

    <p id="cid" hidden="none">{{cid}}</p>
    <p id="uuid" hidden="none">{{uuid}}</p>
    <p id="auth" hidden="none">{{auth}}</p>
    <p id="id" hidden="none">{{id}}</p>
    <script src="../static/qrcode.min.js"></script>
    <script src="../static/ctemp.js"></script>
  </body>
</html>
